var sezBackint=sezImgint=sezTimeout=sezTimeval=0,sezImgIteration=!1,seizureImagePath="http://p.cdn.victorz.ca/misc/seizure/i/",seizureImages=[!1,"ram","matthew","matthew_release"],seizureImageName="";strobe=!1;function genStrobeColor(){return(strobe=!strobe)?"#000":"#FFF"}function genRandHexColor(){return"#"+Math.round(16777215*Math.random()).toString(16)}function btnStartSezClicked(){document.getElementById("sezTmpHide").style.display="none";document.getElementById("sezTmpShow").style.display="";qbr="#FFFFFF";qbo=document.getElementsByName("sezBack");qbl=qbo.length;for(i=0;i<qbl;i++)qbo[i].checked&&(qbr=qbo[i].value);1==qbr&&(sezBackint=setInterval("handleSeizureBack(genStrobeColor)",parseInt(document.getElementById("sezFreq").value)));2==qbr&&(handleSeizureBack(genRandHexColor),sezBackint=setInterval("handleSeizureBack(genRandHexColor)",parseInt(document.getElementById("sezFreq").value)));"s"==qbr&&(document.body.style.backgroundColor=document.getElementById("sezBacks").value,sezBackint=0);"c"==qbr&&(document.body.style.backgroundColor=document.getElementById("sezBackc").value,sezBackint=0);qir=null;qio=document.getElementsByName("sezImg");qil=qio.length;for(i=0;i<qil;i++)qio[i].checked&&(qir=qio[i].value);(seizureImageName=seizureImages[qir])?(document.getElementById("sezImgTarget").src=seizureImagePath+seizureImageName+".png",sezImgIteration=!1,sezImgInt=setInterval(handleSeizureImg,parseInt(document.getElementById("sezFreq").value)*document.getElementById("sezFreqMult").value)):(document.getElementById("sezImgTarget").src=seizureImagePath+"i.png",sezImgInt=0);document.getElementById("sezTimeTarget").innerHTML=sezTimeval=0;sezTimeout=setTimeout("handleSeizureTickTock()",1)}function handleSeizureBack(c){document.body.style.backgroundColor=c()}function handleSeizureImg(){curname=document.getElementById("sezImgTarget").src;(sezImgIteration=!sezImgIteration)?document.getElementById("sezImgTarget").src=seizureImagePath+seizureImageName+"_invert.png":document.getElementById("sezImgTarget").src=seizureImagePath+seizureImageName+".png"}function getCookie(c){var a,b,e,d=document.cookie.split(";");for(a=0;a<d.length;a++)if(b=d[a].substr(0,d[a].indexOf("=")),e=d[a].substr(d[a].indexOf("=")+1),b=b.replace(/^\s+|\s+$/g,""),b==c)return unescape(e);return 0}function setRecordCookie(c){var a=new Date;a.setDate(a.getDate()+365E3);document.cookie="record="+c+"; expires="+a.toUTCString()}function getRecordCookie(){return getCookie("record")}winW=winH=0;winR=25E4;window.onresize=function(){"undefined"!=typeof window.innerWidth?(winW=window.innerWidth,winH=window.innerHeight):document.body&&document.body.offsetWidth?(winW=document.body.offsetWidth,winH=document.body.offsetHeight):(winW=document.getElementsByTagName("body")[0].clientWidth,winH=document.getElementsByTagName("body")[0].clientHeight);document.getElementById("winW").innerHTML=winW;document.getElementById("winH").innerHTML=winH;document.getElementById("winR").innerHTML=winW*winH;document.getElementById("winC").innerHTML=winW*winH>=winR?"is large enough":"needs to be at least "+winR+" pixels in area!"};function handleSeizureTickTock(){document.body.blurry||winW*winH<winR||!sezBackint&&!sezImgInt||(document.getElementById("sezTimeTarget").innerHTML=++sezTimeval/1E3,sezTimeout=setTimeout("handleSeizureTickTock()",1))}function roundNumber(c,a){var b=String(Math.round(c*Math.pow(10,a))/Math.pow(10,a));for(0>b.indexOf(".")&&(b+=".");b.length-b.indexOf(".")<=a;)b+="0";return b}function formatseizureTime(c){return roundNumber(c/1E3,3)}function haltSeizure(){if(sezBackint||sezImgInt||sezTimeout)document.getElementById("sezTmpHide").style.display="",document.getElementById("sezTmpShow").style.display="none",document.body.style.backgroundColor="#FFFFFF",clearInterval(sezBackint),clearInterval(sezImgInt),sezTimeval>getRecordCookie()?(document.cookie=setRecordCookie(sezTimeval),document.getElementById("sezTimeRecord").innerHTML=formatseizureTime(sezTimeval)+" seconds [!NEW!]"):displayRecord(),document.getElementById("sezTimeLast").innerHTML=formatseizureTime(sezTimeval)+" seconds",clearInterval(sezTimeout),sezTimeout=0}function displayRecord(){document.getElementById("sezTimeRecord").innerHTML=getRecordCookie()?formatseizureTime(getRecordCookie())+" seconds":"Unknown"}seizureLoad=function(){document.getElementById("copyyear").innerText=(new Date).getFullYear();for(var c in seizureImages)if(seizureImages[c]){var a=new Image,b=new Image;a.src=seizureImagePath+seizureImages[c]+".png";b.src=seizureImagePath+seizureImages[c]+"_invert.png"}c=document.createElement("img");c.src=seizureImagePath+"sop.png";c.onclick=haltSeizure;document.getElementById("sezStop").parentNode.replaceChild(c,document.getElementById("sezStop"));displayRecord();window.onresize()};window.onfocus=function(){this.blurry=!1};window.onblur=function(){this.blurry=!0};window.ondblclick=haltSeizure;function btnResetClicked(){setRecordCookie("");displayRecord()}function btnSezWantsClicked(c){for(var a=document.getElementById("sezFreq"),b=0;b<a.options.length;b++)if(a.options[b].value==c){a.selectedIndex!=b&&(a.selectedIndex=b,a.onchange());break}};