function $(a){return document.getElementById(a)}function $remove(a){if(a)return a.parentNode.removeChild(a)}var core={root:null,cdn:null,GetXmlHttpObject:function(){var a=null;try{a=new XMLHttpRequest}catch(c){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a},AjaxPost:function(a,c,f){var g=this.GetXmlHttpObject();null==g?(this.ajaxNotified||alert("Your browser doesn't support AJAX. You should really upgrade it!"),this.ajaxNotified=!0):(f&&(g.onreadystatechange=function(){4==g.readyState&&200==g.status&&f(g.responseText)}),g.open("POST",a,!0),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(c))},checkAll:function(a,c){var f=document.getElementsByName(a),g;for(g in f)f[g].checked=c},login:{timestamp_offset:0,prepare:function(a){$("btnLogin").disabled=!1;$("btnLogin").value="Login!";this.timestamp_offset=a-Math.round((new Date).getTime()/1E3)},send:function(){function a(a){var f=function(a,b){return a<<b|a>>>32-b},g=function(a){var b="",c,g;for(c=7;0<=c;c--)g=a>>>4*c&15,b+=g.toString(16);return b},b,d,h=Array(80),q=1732584193,r=4023233417,s=2562383102,t=271733878,u=3285377520,e,k,l,m,n;a=function(a){if(null===a||"undefined"===typeof a)return"";a+="";var b="",c,g,f=0;c=g=0;for(var f=a.length,e=0;e<f;e++){var d=a.charCodeAt(e),h=null;if(128>d)g++;else if(127<d&&2048>d)h=String.fromCharCode(d>>6|192,d&63|128);else if(d&1)h=String.fromCharCode(d>>12|224,d>>6&63|128,d&63|128);else{if(d&1)throw new RangeError("Unmatched trail surrogate at "+e);h=a.charCodeAt(++e);if(h&1)throw new RangeError("Unmatched lead surrogate at "+(e-1));d=((d&1023)<<10)+(h&1023)+65536;h=String.fromCharCode(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}null!==h&&(g>c&&(b+=a.slice(c,g)),b+=h,c=g=e+1)}g>c&&(b+=a.slice(c,f));return b}(a);e=a.length;var p=[];for(b=0;b<e-3;b+=4)d=a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+3),p.push(d);switch(e%4){case 0:b=2147483648;break;case 1:b=a.charCodeAt(e-1)<<24|8388608;break;case 2:b=a.charCodeAt(e-2)<<24|a.charCodeAt(e-1)<<16|32768;break;case 3:b=a.charCodeAt(e-3)<<24|a.charCodeAt(e-2)<<16|a.charCodeAt(e-1)<<8|128}for(p.push(b);14!=p.length%16;)p.push(0);p.push(e>>>29);p.push(e<<3&4294967295);for(a=0;a<p.length;a+=16){for(b=0;16>b;b++)h[b]=p[a+b];for(b=16;79>=b;b++)h[b]=f(h[b-3]^h[b-8]^h[b-14]^h[b-16],1);d=q;e=r;k=s;l=t;m=u;for(b=0;19>=b;b++)n=f(d,5)+(e&k|~e&l)+m+h[b]+1518500249&4294967295,m=l,l=k,k=f(e,30),e=d,d=n;for(b=20;39>=b;b++)n=f(d,5)+(e^k^l)+m+h[b]+1859775393&4294967295,m=l,l=k,k=f(e,30),e=d,d=n;for(b=40;59>=b;b++)n=f(d,5)+(e&k|e&l|k&l)+m+h[b]+2400959708&4294967295,m=l,l=k,k=f(e,30),e=d,d=n;for(b=60;79>=b;b++)n=f(d,5)+(e^k^l)+m+h[b]+3395469782&4294967295,m=l,l=k,k=f(e,30),e=d,d=n;q=q+d&4294967295;r=r+e&4294967295;s=s+k&4294967295;t=t+l&4294967295;u=u+m&4294967295}n=g(q)+g(r)+g(s)+g(t)+g(u);return n.toLowerCase()}$("auth_timestamp").value=this.timestamp_offset+Math.round((new Date).getTime()/1E3);$("auth_randomself").value=Math.floor(9007199254740992*Math.random());$("auth_final").value=a(">"+a($("password").value)+"@"+$("auth_timestamp").value+":"+$("auth_randomassist").value+"!"+$("auth_randomself").value+"<");$("password").value="";$("btnLogin").disabled=!0;$("loginform").submit()}}},pub={_:function(a,c,f){core.AjaxPost(core.root+"async_public.php","task="+a+"&"+c,f)},newCaptcha:function(a){a.src=a.src.replace(/&time=$/,"&time="+(new Date).getTime())},commentCallback:function(a){"!"==a[0]?alert(a.slice(1)):(data_sep=a.indexOf("|"),$("total_comments").innerText=a.slice(0,data_sep),$("comments").innerHTML=a.slice(data_sep+1))},getComments:function(a,c){this._("comments","id="+a+"&page="+c,this.commentCallback)},checkRegisterUsername:function(){this._("register_username","user="+encodeURIComponent($("username").value),function(a){"!"==a[0]?($("ival_username").innerText=a.slice(1),$("ival_username").className="ival_fail"):($("username").value!=a&&($("ival_username").innerText="Fixed: "+a),$("ival_username").className="ival_pass")});$("ival_username").innerText="";$("ival_username").className="ival_progress"},checkRegiserPasswords:function(){$("password").value?($("ival_password").innerText="",$("ival_password").className="ival_pass"):($("ival_password").innerText="Enter a password.",$("ival_password").className="ival_fail");$("password2").value?$("password").value==$("password2").value?($("ival_password2").innerText="",$("ival_password2").className="ival_pass"):($("ival_password2").innerText="The passwords differ.",$("ival_password2").className="ival_fail"):($("ival_password2").innerText="Enter a password.",$("ival_password2").className="ival_fail")},checkRegisterEmail:function(){this._("register_email","email="+encodeURIComponent($("email").value),function(a){"!"==a[0]?($("ival_email").innerText=a.slice(1),$("ival_email").className="ival_fail"):($("ival_email").innerText="",$("ival_email").className="ival_pass")});$("ival_email").innerText="";$("ival_email").className="ival_progress"}},user={_:function(a,c,f){core.AjaxPost(core.root+"async_user.php","task="+a+"&"+c,f)},togglefav:function(a,c){-1<a.src.search("0.")?this._("fav","id="+c,function(){a.src=a.src.replace("progress.gif","fav_1.png")}):-1<a.src.search("1.")&&this._("unfav","id="+c,function(){a.src=a.src.replace("progress.gif","fav_0.png");$remove($("fav_"+c))});a.src=a.src.replace(/fav_[01]\.png/,"progress.gif");return!1},rate_locked:!1,rate:function(a,c){if(this.rate_locked)return!1;var f=this;this._("rate","id="+a+(c?"&up=1":""),function(a){a=a.split("|");$("vote-up").src=$("vote-up").src.replace("progress.gif","vote_up_"+(0<a[0]?1:0)+".png");$("vote-down").src=$("vote-down").src.replace("progress.gif","vote_down_"+(0>a[0]?1:0)+".png");$("vote-up-num").innerText=a[1];$("vote-down-num").innerText=a[2];$("vote-val").innerText=0>a[1]-a[2]?a[1]-a[2]:"+"+(a[1]-a[2]);f.rate_locked=!1});$("vote-up").src=$("vote-up").src.replace(/vote_up_[01]\.png/,"progress.gif");$("vote-down").src=$("vote-down").src.replace(/vote_down_[01]\.png/,"progress.gif");this.rate_locked=!0;return!1},toggleFriends:function(a,c,f){if(-1<c.src.search("progress.gif"))return!1;this._("friend","id="+a,function(a){a="0"!=a;c.src=f?c.src.replace("progress.gif","remove_"+(a?0:1)+".png"):c.src.replace("progress.gif","add_"+(a?1:0)+".png")});c.src=f?c.src.replace(/remove_[01]\.png/,"progress.gif"):c.src.replace(/add_[01]\.png/,"progress.gif");return!1},postComment:function(a){this._("add_comment","id="+a+"&content="+encodeURIComponent($("the_comment").value),function(a){pub.commentCallback(a);"!"!=a[0]&&($("the_comment").value="")});return!1},deleteComment:function(a){this._("delete_comment","id="+a,pub.commentCallback);return!1}},resizer={expanded:!1,origWidth:void 0,origHeight:void 0,fadeInCallback:function(a,c){c+=0.08;0.5>c?($("overlay").style.opacity=c,window.setTimeout(function(){a(a,c)},10)):$("overlay").style.opacity=0.5},overlayIn:function(){this.fadeInCallback(this.fadeInCallback,0)},getWidth:function(){return self.innerWidth?self.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:0},getHeight:function(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:0},expand:function(a,c){var f=$("resizer_target");if(null==f)return!1;this.origWidth=a;this.origHeight=c;var g=this.getWidth(),b=this.getHeight(),d,h;g*c>=b*a?h=(d=b)*a/c:d=(h=g)*c/a;f.setAttribute("width",h);f.setAttribute("height",d);$("game_container").className="flash_popup";$("game_container").style.marginLeft="-"+h/2+"px";$("game_container").style.marginTop="-"+d/2+"px";$("overlay").style.display="inline";this.overlayIn();$("close_fs").style.display="inline";this.expanded=!0;return!1},unexpand:function(){var a=$("resizer_target");null!=a&&this.expanded&&(a.setAttribute("width",this.origWidth),a.setAttribute("height",this.origHeight),$("game_container").className="flash_nopopup",$("game_container").style.marginLeft="0px",$("game_container").style.marginTop="0px",$("overlay").style.display="none",$("close_fs").style.display="none",this.expanded=!1)},resized:function(){window.resizer.expanded&&window.resizer.expand.call(window.resizer,window.resizer.origWidth,window.resizer.origHeight)}};window.onresize=resizer.resized;