var START_POS=new L.LatLng(1.1,0.2),MAX_ZOOM=10,map=L.map("map",{center:START_POS,zoom:MAX_ZOOM,fullscreenControl:!0});map.attributionControl.setPrefix('Engine by <a href="http://leafletjs.com">Leaflet</a>');map.attributionControl.addAttribution('<span id="attribution">this is <a href="http://victorz.ca">Victor</a>\'s zoomable visualization of <a href="https://xkcd.com/1110/" rel="external nofollow">xkcd - Click and Drag</a> (<a href="https://creativecommons.org/licenses/by-nc/2.5/">CC-BY-NC 2.5</a>)</span>');map.attributionControl.addAttribution('inspired by <a href="http://xkcd-map.rent-a-geek.de">dividuum</a>\'s map');map.attributionControl.addAttribution('images served by <a href="https://cloudflare.com">CloudFlare</a> and <a href="https://github.com">Github</a>');map.attributionControl.addAttribution('<script id="_wau_target">\x3c/script>');var hash=new L.Hash;hash.init(map);var _wau=_wau||[];_wau.push(["small","xvictorx","_target"]);(function(){var a=document.createElement("script");a.async=!0;a.src="http://widgets.amung.us/small.js";document.getElementsByTagName("head")[0].appendChild(a)})();map.on("movestart",function move_start(){document.getElementById("intro").style.display="none";map.off("movestart",move_start)});var layer_url="http://xkcd.cdn.victorz.ca/converted/{z}-{x}-{y}.png";function tile_is_available(a,b,c){return a in available&&-1!=available[a].indexOf(b+"-"+c)}var tileLayer=L.tileLayer(layer_url,{maxZoom:MAX_ZOOM,continuousWorld:!0,subdomains:"1234567890"}),tileLayer2=L.tileLayer(layer_url,{maxZoom:MAX_ZOOM,continuousWorld:!0,subdomains:"1234567890"}),miniMap=(new L.Control.MiniMap(tileLayer2,{width:250,height:200,zoomLevelFixed:2,toggleDisplay:!0,autoToggleDisplay:!0})).addTo(map);tileLayer.getTileUrl=tileLayer2.getTileUrl=function(a,b){b=b||this._getZoomForUrl();return tile_is_available(b,a.x,a.y)?L.Util.template(this._url,L.Util.extend({s:this._getSubdomain(a),z:b,x:a.x,y:a.y},this.options)):b?a.y<1<<b-1?"http://xkcd.cdn.victorz.ca/sky.png":"http://xkcd.cdn.victorz.ca/ground.png":0>a.y?"http://xkcd.cdn.victorz.ca/sky.png":0<a.y?"http://xkcd.cdn.victorz.ca/ground.png":"http://xkcd.cdn.victorz.ca/split.png"};tileLayer.addTo(map);var originalLayer=L.tileLayer.canvas({maxZoom:MAX_ZOOM,tileSize:2048});function to_original(a,b,c,d,e){a=(a<<MAX_ZOOM-e)+c-(1<<MAX_ZOOM-4);if(-33>a||48<=a)return!1;b=(b<<MAX_ZOOM-e)+d-(1<<MAX_ZOOM-4);return-19>b||13<=b?!1:(0<=b?b+1+"s":-b+"n")+(0<=a?a+1+"e":-a+"w")+".png"}originalLayer.drawTile=function(a,b,c){if(!(5>c||0>b.x||b.x>=1<<c)){a=a.getContext("2d");a.strokeStyle=a.fillStyle="green";for(var d=2<<c,e=1<<MAX_ZOOM-c,f=0;f<e;++f)for(var g=0;g<e;++g){var h=f*d,k=g*d,l=to_original(b.x,b.y,f,g,c);l&&(a.strokeRect(h,k,d,d),a.fillText(l,h+5,k+10))}}};var coordinateLayer=L.tileLayer.canvas({maxZoom:MAX_ZOOM});coordinateLayer.drawTile=function(a,b,c){0>b.x||b.x>=1<<c||(a=a.getContext("2d"),a.strokeStyle=a.fillStyle="red",a.strokeRect(0,0,256,256),a.fillText("("+b.x+", "+b.y+")",5,10))};var contentLayer=L.tileLayer.canvas({maxZoom:MAX_ZOOM});contentLayer.drawTile=function(a,b,c){tile_is_available(c,b.x,b.y)&&(a=a.getContext("2d"),a.strokeStyle=a.fillStyle="blue",a.strokeRect(0,0,256,256))};var baseMaps={"xkcd 1110":tileLayer},overlayMaps={File:originalLayer,Coordinates:coordinateLayer,Content:contentLayer};L.control.layers(baseMaps,overlayMaps).addTo(map);function auto_close(){var a=document.getElementById("autoclose");a.parentNode.removeChild(a)}window.setTimeout(auto_close,5E3);